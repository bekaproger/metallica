{% extends 'base.html.twig' %}

{% block javascripts %}
    <script src="https://cdn.jsdelivr.net/npm/luxon@1.26.0"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.0.1/dist/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.0.0"></script>
    <script src="{{ asset('js/financial_charts.js') }}"></script>
{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" type="text/css" href="{{ asset('styles/financial_chart.css') }}">
{% endblock %}

{% block body %}
    <div style="margin: auto">
        <table id="prices-table" data-json-prices="{{ json_prices }}">
            <thead>
            <tr>
                <th>Date</th>
                <th>Open</th>
                <th>High</th>
                <th>Low</th>
                <th>Close</th>
                <th>Volume</th>
            </tr>
            </thead>
            <tbody>
            {% for price in prices %}
                <tr>
                    <td>{{ price.date|date("d-m-Y") }}</td>
                    <td>{{ price.open }}</td>
                    <td>{{ price.high }}</td>
                    <td>{{ price.low }}</td>
                    <td>{{ price.close }}</td>
                    <td>{{ price.volume }}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>

    <div style="width: 1000px">
        <canvas id="prices_chart" width="1250" height="312" style="display: block; box-sizing: border-box; height: 250px; width: 1000px;"></canvas>
    </div>

    <style>
        table {
            border: 1px solid grey;
        }
        th {
            border: 1px solid grey;
        }

        td {
            border: 1px solid grey;
            padding: 5px 15px;
        }
    </style>

{% endblock %}

{% block bottom_ajavascripts %}
    <script src="{{ asset('js/prices.js') }}"></script>
{% endblock %}